--CREATE KÝTAP--
CREATE TABLE sys.kitap
(
kitap_id number PRIMARY KEY,
kitap_adi varchar2(255) NOT NULL,
kitap_fiyat number(9,2) NOT NULL,
kitap_tur varchar2(255) NOT NULL,
yazar_id number (10,0), --fk
CONSTRAINT fk_kitap_yazar
FOREIGN KEY( yazar_id )
REFERENCES sys.yazar(yazar_id )
ON DELETE CASCADE
);

--INSERT--
Insert into sys.kitap (kitap_id,kitap_adi,kitap_fiyat,kitap_tur,yazar_id) values (1,'Sefiller',25,'Klasik',001);
Insert into sys.kitap (kitap_id,kitap_adi,kitap_fiyat,kitap_tur,yazar_id) values (2,'Simyaci',12, 'Klasik',002);
Insert into sys.kitap (kitap_id,kitap_adi,kitap_fiyat,kitap_tur,yazar_id) values (3,'Harry Potter',30,'Fantastik',003);
Insert into sys.kitap (kitap_id,kitap_adi,kitap_fiyat,kitap_tur,yazar_id) values (4,'Yuzuklerin Efendisi',40,'Fantastik',004);
Insert into sys.kitap (kitap_id,kitap_adi,kitap_fiyat,kitap_tur,yazar_id) values (5,'Nutuk',35,'Tarih',005);

--CREATE YAZAR--
CREATE TABLE sys.yazar
(
yazar_id number PRIMARY KEY,
yazar_isim varchar2(255) NOT NULL,
yazar_soyadi varchar2(255) NOT NULL,
yazar_puan number (8,2) NOT NULL,
yayinevi_id NUMBER(8,2) NOT NULL, --fk
 CONSTRAINT fk_yazar_yayinevi
        FOREIGN KEY(yayinevi_id )
        REFERENCES sys.yayinevi(yayinevi_id )
        ON DELETE CASCADE
);

--INSERT--
Insert into sys.yazar (yazar_id, yazar_isim, yazar_soyadi, yazar_puan, yayinevi_id) values (001,'Victor','Hugo',9,'01');
Insert into sys.yazar (yazar_id, yazar_isim, yazar_soyadi, yazar_puan, yayinevi_id) values (002,'Paulo','Coelho',8,'02');
Insert into sys.yazar (yazar_id, yazar_isim, yazar_soyadi, yazar_puan, yayinevi_id) values (003,'J.K.','Rowling',8,'01');
Insert into sys.yazar (yazar_id, yazar_isim, yazar_soyadi, yazar_puan, yayinevi_id) values (004,'J.R.R.','Tolkien',9,'01');
Insert into sys.yazar (yazar_id, yazar_isim, yazar_soyadi, yazar_puan, yayinevi_id) values (005,'Mustafa Kemal','Atatürk',10,'03');

--CREATE YAYINEVÝ--
CREATE TABLE sys.yayinevi
(
yayinevi_id number
         GENERATED BY DEFAULT AS IDENTITY START WITH 10 
         PRIMARY KEY,
yayinevi_isim varchar2(255) NOT NULL,
yayinevi_adres varchar2(255) NOT NULL,
yayinevi_bolge varchar2(255) NOT NULL,
yayinevi_sube_sayisi number(10,0) NOT NULL
);

--INSERT--
Insert into sys.yayinevi (yayinevi_id,yayinevi_isim, yayinevi_adres, yayinevi_bolge, yayinevi_sube_sayisi) values(01,'Pegasus','Istanbul','Marmara',128);
Insert into sys.yayinevi (yayinevi_id,yayinevi_isim, yayinevi_adres, yayinevi_bolge, yayinevi_sube_sayisi) values(02,'Can','Istanbul','Marmara',345);
Insert into sys.yayinevi (yayinevi_id,yayinevi_isim, yayinevi_adres, yayinevi_bolge, yayinevi_sube_sayisi) values(03,'Yapi Kredi','Ankara','Ýç Anadolu',561);

--SYNONYM--
CREATE SYNONYM kodluyoruz_kitap FOR sys.kitap; 
CREATE SYNONYM kodluyoruz_yazar FOR sys.yazar;
CREATE SYNONYM kodluyoruz_yayinevi FOR sys.yayinevi;

select * from kodluyoruz_kitap

--VIEW--
CREATE VIEW kitap_vw AS
(SELECT kitap_adi, kitap_fiyat, kitap_tur FROM sys.kitap where yazar_id=003);
  
CREATE VIEW yazar_vw AS
(SELECT yazar_id, yazar_isim, yazar_soyadi FROM sys.yazar where yazar_puan=9);
    
CREATE VIEW yayinevi_vw AS
(SELECT yayinevi_id, yayinevi_isim, yayinevi_sube_sayisi FROM sys.yayinevi where yayinevi_bolge='Marmara');
    
select * from yayinevi_vw  
  
  
  
 
  
  
  